<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Phantomsong</title>

  <link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,300..900;1,300..900&display=swap"
    rel="stylesheet">
  <link href="../styles.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
    referrerpolicy="no-referrer">
</head>

<body>

  <!-- ===== Header ===== -->
  <header class="header">
    <div class="container nav">
      <a href="../index.html" class="brand" aria-label="Back to home">
        <span class="brand-logo" aria-hidden="true">
          <svg viewBox="0 0 46 46" width="46" height="46" aria-hidden="true">
            <defs>
              <symbol id="ps-logo-shape" viewBox="0 0 1006.1 1376.9">
                <g transform="matrix(.1 0 0 -.1 -61.743 1488.5)" fill="#000">
                  <path
                    d="m1193.6 7390.4c-66.011-1.0896-170.82-30.749-222.13-57.051-101.52-51.718-210.25-158.22-264.51-256.52l-28.516-51.133a315.55 315.55 0 0 1-39.98-153.34l-3.0078-2590a315.55 315.55 0 0 1 0-0.1563c-0.99977-1464.7-4.049-2123.4 5.3906-2447.9 4.7198-162.24-0.70678-232.49 42.734-352.44 21.721-59.978 80.166-136.66 114.82-165.94 11.202-9.4627 11.588-9.7345 14.512-12.168 14.23-17.022 53.71-63.325 131.29-103.55 90.082-46.714 166.55-53.546 252.38-59.59 128.76-9.0658 312.67-9.692 648.44-9.4336 111.92 0.086 240.72 0.2735 389.96 0.2735 149.35 0 278.73-0.096 391.17-0.098 393.56-0.01 567.54-2.1559 709.16 15.684 70.812 8.9197 154.08 29.411 225.61 76.465 70.785 46.568 94.06 81.99 101.93 90.117-0.4631-0.4606-0.942-0.9097-1.4063-1.3672l1.5625 1.543c111.45 110.98 188.88 311.36 178.85 466.5-14.262 222.33-161.61 424.75-358.44 516.6a315.55 315.55 0 0 1-2.4023 1.1133c-13.456 6.1431-80.438 30.694-127.21 37.441-46.769 6.7476-86.086 8.0947-149.41 9.707-126.66 3.2246-347.83 3.8516-791.33 5.3516a315.55 315.55 0 0 0-0.019 0l-578.54 1.9336v2084.5c0 1189 0.01 1788.3-2.5195 2100.9-1.2633 156.34-2.8431 239.38-6.4844 299.8-3.6369 60.354-23.722 143.45-31.289 163.57-79.879 212.05-318.54 378.87-542.27 387.91-18.373 0.8604-36.854 1.5463-58.359 1.1914z" />
                  <path
                    d="m1283.1 13084c-53.914 1.059-109.65-2.677-177.21-24.786a315.55 315.55 0 0 1-0.7032-0.214c-174.2-57.468-328.56-191.93-396.74-369.61a315.55 315.55 0 0 1-0.0586-0.176c-10.966-28.634-26.779-97.724-30.547-147.73-3.768-50.009-5.2845-110.15-6.5625-215.55-2.556-210.79-2.7734-598-2.7734-1348.6v-1550a315.55 315.55 0 0 1 30.254-134.82l26.016-55c100.03-211.83 311.05-356.76 546.23-360.18 65.38-0.948 132.02 9.1363 196 30.43 197.62 64.327 289.32 155.8 370.84 337.25v0.019l23.613 52.148a315.55 315.55 0 0 1 28.105 130.16v1550c0 750.57-0.2174 1137.8-2.7734 1348.6-1.278 105.4-2.7945 165.54-6.5625 215.55-3.7612 49.92-19.524 118.83-30.488 147.56-61.331 160.8-149.56 255.3-300.72 331.07-93.664 47.425-176.44 62.127-265.92 63.887z" />
                  <path
                    d="m5597.6 12803c-70.638-2.219-140.15-7.24-207.85-15.547-546.93-66.413-1059.4-311.28-1449.4-696.58-210.66-207.39-365.43-423.58-493.95-687.21-111.3-227.11-178.22-437.48-228.52-704.96-33.091-175.29-23.47-357.94-25.469-3738.1-1.9998-2007.8-4.8769-2915.3 3.1836-3345.7 4.0302-215.2 0.818-295.62 31.406-412.6 15.294-58.489 71.933-154.81 119.12-195.27 14.171-12.152 20.173-17.471 21.973-19.082 107.82-103.76 279.11-176.58 423.4-178.14a315.55 315.55 0 0 1 3.4375-0.02c222.19 0 457.62 149.84 551.7 350.64l0.02 0.039 23.75 50.469a315.55 315.55 0 0 1 30.058 134.38v4829.9c62.278-39.235 127.19-75.982 196.33-111.05 218.52-111.52 450.29-186.13 708.46-231.56a315.55 315.55 0 0 1 1.2109-0.2148c246.22-42.344 573.02-40.247 819.75 4.4726a315.55 315.55 0 0 1 0.8008 0.1563c542.41 99.74 1013.5 351.92 1390.9 746.15a315.55 315.55 0 0 1 0.1172 0.098c373.08 390.14 603.26 879.23 670.08 1418.3a315.55 315.55 0 0 1 0.1367 1.094c21.617 179.58 21.24 425.69 0.078 604.75a315.55 315.55 0 0 1-0.1367 1.074c-88.966 731.12-492.06 1378.3-1110.7 1785.5a315.55 315.55 0 0 1-0.1953 0.137c-247.76 162.78-557.09 296.35-839.84 355.18h-0.059c-205.1 42.76-427.48 60.534-639.73 53.867zm89.531-1209.4c84.54 0.983 172.88-4.512 209.69-10.195a315.55 315.55 0 0 1 0.2343-0.04c535.89-82.32 951.46-476.41 1070.4-1029.5a315.55 315.55 0 0 1 0.2929-1.387c10.822-49.22 13.316-419.23 4.1992-463.24a315.55 315.55 0 0 1-0.4101-2.031c-110.84-553.36-520.2-956.06-1046.7-1046a315.55 315.55 0 0 1-1.4648-0.2539c-45.307-7.9546-163.8-16.427-261.48-15.391-58.614 0.622-113.6 4.494-139 8.0664a315.55 315.55 0 0 1-0.332 0.059c-476.43 66.478-907.23 430-1055.1 892.52l-0.019 0.039c-55.437 173.82-52.012 156.19-52.012 383.94 0 229.66 0.5631 237.81 64.082 418.24a315.55 315.55 0 0 1 0.5859 1.68c147.83 427.68 550 769.97 996.35 848.32a315.55 315.55 0 0 1 0.2929 0.04c37.464 6.612 125.78 14.095 210.33 15.078z" />
                  <path
                    d="m5869 14869c-52.614 0.132-101.19-0.421-143.14-1.933-20.979-0.756-40.06-1.684-60.02-3.36-19.96-1.675-28.466 2.388-88.789-15.546a315.55 315.55 0 0 1-2.5586-0.782c-272.25-83.463-464.09-339.04-440-632.48a315.55 315.55 0 0 1 0.039-0.391c18.303-219.64 138.12-391.48 329.28-491.41a315.55 315.55 0 0 1 5.0586-2.578c41.752-20.876 124.96-44.724 187.03-51.465 61.967-6.73 132.93-9.995 258.65-15.527h0.059c146.75-6.716 340.44-21.02 392.11-27.129 844.17-101.29 1560.4-447.1 2142.1-1028.7 527.27-528.24 825.65-1105.3 940.78-1813.6a315.55 315.55 0 0 1 0.1563-1.016c33.033-199.14 41.738-311.11 41.738-515.35 0-595.95-142.44-1141-426.89-1642.3a315.55 315.55 0 0 1-0.059-0.098c-435.31-767.66-1260.6-1393.2-2124.2-1609.6a315.55 315.55 0 0 1-0.059 0c-324.2-81.288-470.74-98.56-864.04-99.531a315.55 315.55 0 0 1-0.996 0c-178.07-1.0032-268.92 2.8895-380.98-17.461s-240.12-111.29-283.91-154.51a315.55 315.55 0 0 1-2.3632-2.3633c-234.45-236.4-219.61-652.05 27.07-873.79 48.863-43.934 180.57-130.1 297.91-148.85 88.061-14.073 169.77-15.507 293.93-15.352 41.385 0.052 87.492 0.2735 140.12 0.2735 391.62 0 509.01 9.454 812.91 66.367 759.29 141.51 1491.2 491.07 2112.9 1004.8 174.16 143.53 431.55 400.26 575.14 571.84 591.06 709.27 932.14 1515.4 1034.2 2437.3 27.389 254.71 25.16 733.22-5.468 986.6-56.92 453.25-158.92 847.54-320.78 1227.4-431.78 1009.3-1248.8 1856-2264.8 2356-585.51 288.48-1206.3 455.94-1862.4 501.66-95.076 6.262-213.48 9.17-318.71 9.433z" />
                </g>
              </symbol>
              <mask id="logo-cutout" maskUnits="userSpaceOnUse" maskContentUnits="userSpaceOnUse">
                <rect x="0" y="0" width="46" height="46" fill="#fff" />
                <svg x="5" y="5" width="36" height="36" viewBox="0 0 1006.1 1376.9" preserveAspectRatio="xMidYMid meet">
                  <use href="#ps-logo-shape" fill="#000" />
                </svg>
              </mask>
            </defs>

            <rect x="0" y="0" width="46" height="46" rx="10" ry="10" fill="var(--light)" mask="url(#logo-cutout)" />
            <rect x="0.5" y="0.5" width="45" height="45" rx="9.5" ry="9.5" fill="none" stroke="var(--border)" />
          </svg>
        </span>

        Phantomsong
      </a>

      <nav class="nav-links" aria-label="Primary">
        <a href="#markets">Markets</a>
        <a href="#faq">FAQ</a>
        <a href="#contact">Contact</a>
      </nav>

      <div class="nav-cta">
        <a class="btn btn-ghost" href="../index.html">Home</a>
        <button id="openCustom" class="btn btn-primary">Custom</button>
      </div>

      <button class="menu-btn" id="menuBtn" aria-label="Toggle menu" aria-expanded="false">☰</button>
    </div>

    <div class="container mobile-menu" id="mobileMenu" aria-hidden="true">
      <a href="#markets">Markets</a>
      <a href="#faq">FAQ</a>
      <a href="#contact">Contact</a>
      <div class="menu-actions">
        <a class="btn btn-ghost" href="../index.html">Home</a>
        <button id="openCustomM" class="btn btn-primary">Custom</button>
      </div>
    </div>
  </header>

  <!-- ===== Market Hero ===== -->
  <section class="section market-hero" id="market-hero">
    <div class="container">
      <div class="market-banner" role="img" aria-label="Phantomsong Market Banner"></div>
    </div>
  </section>

  <!-- ===== Crochet Showcase ===== -->
  <section class="section showcase" id="showcase">
    <div class="container">
      <div class="section-header">
        <div>
          <span class="tag">Crochet Showcase</span>
          <h2>Made-to-Order Favorites</h2>
          <p class="muted">Tap an item to request interest—tell us colors, materials, and timing.</p>
        </div>
        <button class="btn btn-ghost" id="openCustomTop">Request something custom</button>
      </div>

      <div class="carousel-wrap">
        <button class="caro-arrow caro-prev" id="prevBtn" aria-label="Scroll left">‹</button>
        <div class="carousel" id="carousel" aria-label="Crochet items carousel"></div>
        <button class="caro-arrow caro-next" id="nextBtn" aria-label="Scroll right">›</button>
      </div>
    </div>
  </section>

  <!-- ===== Markets ===== -->
  <section class="section markets" id="markets">
    <div class="container">
      <div class="section-header">
        <div>
          <span class="tag">Markets</span>
          <h2>Come say hi!</h2>
          <p class="muted">Where we’ll be (and where we’ve been).</p>
        </div>
      </div>

      <div class="lists">
        <div class="card list-card">
          <h3>Upcoming</h3>
          <div id="upcomingEmpty" class="events-empty" hidden>
            No events currently scheduled.
            <a class="btn btn-primary" href="#" id="joinMailing">Join our mailing list</a>
          </div>
          <ul id="upcomingList" class="event-list list-scroll" aria-live="polite"></ul>
        </div>

        <div class="card list-card">
          <h3>Past</h3>
          <ul id="pastList" class="event-list list-scroll" aria-live="polite"></ul>
        </div>
      </div>
    </div>

  </section>

  <!-- ===== FAQ ===== -->
  <section class="section faq" id="faq">
    <div class="container">
      <div class="section-header">
        <div>
          <span class="tag">FAQ</span>
          <h2>How it works</h2>
        </div>
      </div>

      <div class="card qa">
        <div>
          <div class="q">How long is the lead time?</div>
          <div class="a">Typically <strong>1–3 weeks</strong> depending on complexity and material availability.</div>
        </div>
        <div>
          <div class="q">Custom pricing?</div>
          <div class="a">Customs pricing will be <strong>discussed and agreed upon</strong> after we receive your
            inquiry form.</div>
        </div>
        <div>
          <div class="q">Deposits</div>
          <div class="a"><strong>50%</strong> of the payment is required upfront before the creation process begins. The
            remaining balance must be paid prior to final delivery.</div>
        </div>
        <div>
          <div class="q">Is the form a purchase?</div>
          <div class="a">No. It’s an <strong>interest request</strong> so we can confirm the details, timeline, and
            price with you first.</div>
        </div>
      </div>
    </div>
  </section>

  <!-- ===== Contact ===== -->
  <section class="section" id="contact">
    <div class="container">
      <div class="section-header">
        <div>
          <span class="tag">Contact</span>
          <h2>Questions? Say hi.</h2>
          <p class="muted">Tell us what you’re thinking and we’ll get back to you fast.</p>
        </div>
      </div>

      <div class="card contact-card">
        <div>
          <h3>Reach out</h3>
          <div class="muted">Here are our socials!</div>
        </div>
        <div class="actions">
          <a class="btn btn-primary" href="mailto:contact@phantomsong.net">contact@phantomsong.net</a>
        </div>
        <div class="socials">
          <a class="icon" href="https://www.tiktok.com/@phantomsong.design" aria-label="TikTok" target="_blank"
            rel="noopener">
            <i class="fa-brands fa-tiktok"></i>
          </a>
          <a class="icon" href="https://www.instagram.com/phantomsong.design" aria-label="Instagram" target="_blank"
            rel="noopener">
            <i class="fa-brands fa-instagram"></i>
          </a>
          <a class="icon" href="https://www.facebook.com/people/Phantomsong-Co/61581828680092/" aria-label="Facebook"
            target="_blank" rel="noopener">
            <i class="fa-brands fa-facebook"></i>
          </a>
        </div>
      </div>
    </div>
  </section>

  <!-- ===== Interest Modal ===== -->
  <div id="interestModal" class="consult-modal" role="dialog" aria-modal="true" aria-hidden="true">
    <div class="consult-card" role="document">
      <div class="consult-head">
        <h3 class="consult-title">Request Interest</h3>
        <button class="consult-close" id="interestClose" aria-label="Close">✕</button>
      </div>
      <form id="interestForm" class="consult-body" action="https://formspree.io/f/xjkaedvg" method="POST" novalidate>
        <input type="hidden" name="_subject" value="Interest request">
        <input type="hidden" name="_redirect" value="https://phantomsong.design/thanks">
        <input type="text" name="_gotcha" tabindex="-1" autocomplete="off" style="display:none">
        <p class="card">
          This is <strong>not a purchase</strong>. It tells us you’re interested so we can confirm details, timing, and
          pricing before any payment.
        </p>

        <div class="consult-grid cols-2">
          <div class="form-field">
            <label for="iName">Your name *</label>
            <input id="iName" name="name" type="text" required>
          </div>
          <div class="form-field">
            <label for="iDeadline">Deadline</label>
            <input id="iDeadline" name="deadline" type="date">
          </div>
        </div>

        <div class="consult-grid cols-2">
          <div class="form-field">
            <label for="iPhone">Phone</label>
            <input id="iPhone" name="phone" type="tel" inputmode="tel" placeholder="(###) ###-####">
            <small class="help">Provide email or phone (one is required).</small>
          </div>
          <div class="form-field">
            <label for="iEmail">Email</label>
            <input id="iEmail" name="email" type="email" inputmode="email" placeholder="you@email.com">
          </div>
        </div>

        <div class="consult-grid cols-2">
          <div class="form-field">
            <label for="iItem">Item</label>
            <input id="iItem" name="item" type="text" readonly>
          </div>

          <div class="form-field">
            <label for="iMaterial">Material</label>
            <select id="iMaterial" name="material">
              <option value="Acrylic">Acrylic</option>
              <option value="Chenille">Chenille</option>
              <option value="Velvet">Velvet</option>
              <option value="Cotton/nylon blend">Cotton/nylon blend</option>
            </select>
          </div>
        </div>

        <div class="consult-grid">
          <div class="form-field">
            <label for="iColors">Colors</label>
            <input id="iColors" name="colors" type="text" placeholder="e.g., lilac + cream">
          </div>
        </div>

        <div class="consult-grid">
          <div class="form-field">
            <label for="iNotes">Notes</label>
            <textarea id="iNotes" name="notes" placeholder="Anything else we should know?"></textarea>
          </div>
        </div>

        <div class="consult-actions">
          <button type="button" class="btn btn-ghost" id="interestCancel">Cancel</button>
          <button type="submit" class="btn btn-primary">Send interest</button>
        </div>
      </form>
    </div>
  </div>

  <!-- ===== Custom Commission Modal ===== -->
  <div id="customModal" class="consult-modal" role="dialog" aria-modal="true" aria-hidden="true">
    <div class="consult-card" role="document">
      <div class="consult-head">
        <h3 class="consult-title">Custom Commission Request</h3>
        <button class="consult-close" id="customClose" aria-label="Close">✕</button>
      </div>
      <form id="customForm" class="consult-body" action="https://formspree.io/f/xjkaedvg" method="POST" novalidate>
        <input type="hidden" name="_subject" value="Custom commission request">
        <input type="hidden" name="_redirect" value="https://phantomsong.design/thanks">
        <input type="text" name="_gotcha" tabindex="-1" autocomplete="off" style="display:none">
        <p class="card">
          This is <strong>not a purchase</strong>. We’ll reply to confirm feasibility, timeline, and a price estimate.
        </p>

        <div class="consult-grid cols-2">
          <div class="form-field">
            <label for="cName">Your name *</label>
            <input id="cName" name="name" type="text" required>
          </div>
          <div class="form-field">
            <label for="cDeadline">Deadline</label>
            <input id="cDeadline" name="deadline" type="date">
          </div>
        </div>

        <div class="consult-grid cols-2">
          <div class="form-field">
            <label for="cPhone">Phone</label>
            <input id="cPhone" name="phone" type="tel" inputmode="tel" placeholder="(###) ###-####">
            <small class="help">Provide email or phone (one is required).</small>
          </div>
          <div class="form-field">
            <label for="cEmail">Email</label>
            <input id="cEmail" name="email" type="email" inputmode="email" placeholder="you@email.com">
          </div>
        </div>

        <div class="consult-grid cols-2">
          <div class="form-field">
            <label for="cSize">Item size *</label>
            <select id="cSize" name="size" required>
              <option value="" disabled selected>Select a size</option>
              <option>Keychain-sized</option>
              <option>Small</option>
              <option>Medium</option>
            </select>
            <small class="help">Pricing will be estimated and emailed to you.</small>
          </div>
          <div class="form-field">
            <label for="cMaterial">Material</label>
            <select id="cMaterial" name="material">
              <option value="Acrylic">Acrylic</option>
              <option value="Chenille">Chenille</option>
              <option value="Velvet">Velvet</option>
              <option value="Cotton/nylon blend">Cotton/nylon blend</option>
            </select>
          </div>
        </div>

        <div class="consult-grid">
          <div class="form-field">
            <label for="cDescription">Design details *</label>
            <textarea id="cDescription" name="description" required
              placeholder="What pattern or character? Link an example if you have one. If it isn’t a character, include your preferred colors."></textarea>
          </div>
        </div>

        <div class="consult-actions">
          <button type="button" class="btn btn-ghost" id="customCancel">Cancel</button>
          <button type="submit" class="btn btn-primary">Send request</button>
        </div>
      </form>
    </div>
  </div>

  <!-- ===== Footer ===== -->
  <footer class="footer" id="about" role="contentinfo">
    <div class="container grid">
      <div class="footer-col footer-brand">
        <div class="brand">
          <span class="brand-logo" aria-hidden="true">
            <svg viewBox="0 0 46 46" width="46" height="46" aria-hidden="true">

              <rect x="0" y="0" width="46" height="46" rx="10" ry="10" fill="var(--light)" mask="url(#logo-cutout)" />
              <rect x="0.5" y="0.5" width="45" height="45" rx="9.5" ry="9.5" fill="none" stroke="var(--border)" />
            </svg>
          </span>
          Phantomsong
        </div>
        <div>Millington, Tennessee</div>
      </div>

      <!-- Navigate -->
      <div class="footer-col">
        <div class="section-header">
          <strong>Navigate</strong>
        </div>
        <nav aria-label="Footer navigation">
          <a href="../index.html">Home</a>
          <a href="#showcase">Showcase</a>
          <a href="#markets">Markets</a>
          <a href="#faq">FAQ</a>
        </nav>
      </div>

      <!-- Contact -->
      <div class="footer-col">
        <div class="section-header">
          <strong>Contact</strong>
        </div>
        <a href="mailto:contact@phantomsong.net">contact@phantomsong.net</a>
      </div>
    </div>
  </footer>

  <script>
    // Mobile menu
    const menuBtn = document.getElementById('menuBtn');
    const mobileMenu = document.getElementById('mobileMenu');
    const openCustom = document.getElementById('openCustom');
    const openCustomM = document.getElementById('openCustomM');
    const openCustomTop = document.getElementById('openCustomTop');
    menuBtn?.addEventListener('click', () => {
      const open = mobileMenu.style.display === 'flex';
      mobileMenu.style.display = open ? 'none' : 'flex';
      mobileMenu.setAttribute('aria-hidden', open ? 'true' : 'false');
      menuBtn.setAttribute('aria-expanded', open ? 'false' : 'true');
    });

    // Showcase items
    const items = [
      { title: "Small Jester", img: "../SRC/JesterSmall.jpg" },
      { title: "Big Jester", img: "../SRC/JesterBig.jpg" },
      { title: "Mushroom", img: "../SRC/Mushroom.jpg" },
      { title: "Frog", img: "../SRC/Frogs.jpg" },
      { title: "Smile Guy", img: "../SRC/SmileGuy.png" },
    ];

    const carousel = document.getElementById('carousel');
    const prevBtn = document.getElementById('prevBtn');
    const nextBtn = document.getElementById('nextBtn');

    function renderItems() {
      carousel.innerHTML = '';
      items.forEach((it, idx) => {
        const card = document.createElement('article');
        card.className = 'item-card';
        card.innerHTML = `
          <img class="thumb" src="${it.img}" alt="${it.title}">
          <div class="pad">
            <h3>${it.title}</h3>
            <div class="price-note">Made to order • Tell us colors & material</div>
            <button class="btn btn-primary" data-idx="${idx}">Request Interest</button>
          </div>
        `;
        carousel.appendChild(card);
      });

      carousel.querySelectorAll('button.btn-primary').forEach(btn => {
        btn.addEventListener('click', () => openInterest(items[Number(btn.dataset.idx)]));
      });

      updateArrows();
    }

    function updateArrows() {
      const overflow = carousel.scrollWidth > carousel.clientWidth + 4;
      prevBtn.style.display = nextBtn.style.display = overflow ? 'grid' : 'none';
      const max = carousel.scrollWidth - carousel.clientWidth - 1;
      prevBtn.toggleAttribute('disabled', carousel.scrollLeft <= 0);
      nextBtn.toggleAttribute('disabled', carousel.scrollLeft >= max);
    }
    function scrollByAmount(dir) {
      const amt = Math.max(1, Math.floor(carousel.clientWidth * 0.9));
      carousel.scrollBy({ left: dir * amt, behavior: 'smooth' });
      setTimeout(updateArrows, 250);
    }
    prevBtn.addEventListener('click', () => scrollByAmount(-1));
    nextBtn.addEventListener('click', () => scrollByAmount(1));
    carousel.addEventListener('scroll', updateArrows);
    window.addEventListener('resize', updateArrows);
    window.addEventListener('load', () => { renderItems(); updateArrows(); });

    // Interest modal
    const interestModal = document.getElementById('interestModal');
    const interestClose = document.getElementById('interestClose');
    const interestCancel = document.getElementById('interestCancel');
    const interestForm = document.getElementById('interestForm');
    const iItem = document.getElementById('iItem');
    const iMaterial = document.getElementById('iMaterial');
    const iEmail = document.getElementById('iEmail');
    const iPhone = document.getElementById('iPhone');

    // Enforce a minimum deadline 7 days out
    (function setMinDeadlines(days = 7) {
      const d = new Date();
      d.setDate(d.getDate() + days);
      const min = d.toISOString().split('T')[0];
      document.getElementById('iDeadline')?.setAttribute('min', min);
      document.getElementById('cDeadline')?.setAttribute('min', min);
    })();

    function openInterest(item) {
      iItem.value = item?.title || '';
      document.body.classList.add('modal-open');
      interestModal.classList.add('open');
      interestModal.setAttribute('aria-hidden', 'false');
      document.getElementById('iName').focus();
    }
    function closeInterest() {
      interestModal.classList.remove('open');
      interestModal.setAttribute('aria-hidden', 'true');
      document.body.classList.remove('modal-open');
      interestForm.reset();
    }
    interestClose.addEventListener('click', closeInterest);
    interestCancel.addEventListener('click', closeInterest);
    interestModal.addEventListener('click', e => { if (e.target === interestModal) closeInterest(); });

    function requireContact(formEmailEl, formPhoneEl) {
      const hasEmail = formEmailEl.value.trim().length > 0;
      const hasPhone = formPhoneEl.value.trim().length > 0;
      formEmailEl.setCustomValidity('');
      formPhoneEl.setCustomValidity('');
      if (!hasEmail && !hasPhone) {
        formEmailEl.setCustomValidity('Provide email or phone.');
        formPhoneEl.setCustomValidity('Provide email or phone.');
        return false;
      }
      return true;
    }

    // === Formspree helper ===
    async function postToFormspree(form, extra = {}) {
      const fd = new FormData(form);
      Object.entries(extra).forEach(([k, v]) => fd.set(k, v));
      const r = await fetch(form.action, { method: 'POST', body: fd, headers: { 'Accept': 'application/json' } });
      if (!r.ok) throw new Error('Form submit failed');
    }

    // Formspree Interest form
    interestForm.addEventListener('submit', async (e) => {
      e.preventDefault();
      if (!requireContact(iEmail, iPhone)) { interestForm.reportValidity(); return; }
      if (!interestForm.reportValidity()) return;

      const subject = `Interest: ${iItem.value || 'Custom'} — ${document.getElementById('iName').value.trim()}`;
      try {
        await postToFormspree(interestForm, { _subject: subject });
        window.location.href = 'https://phantomsong.design/thanks';
      } catch {
        alert('Sorry—there was a problem submitting. Please try again.');
      } finally {
        closeInterest();
      }
    });

    // Custom modal
    const customModal = document.getElementById('customModal');
    const customClose = document.getElementById('customClose');
    const customCancel = document.getElementById('customCancel');
    const customForm = document.getElementById('customForm');
    const cEmail = document.getElementById('cEmail');
    const cPhone = document.getElementById('cPhone');
    const cMaterial = document.getElementById('cMaterial');

    function openCustomModal() {
      document.body.classList.add('modal-open');
      customModal.classList.add('open');
      customModal.setAttribute('aria-hidden', 'false');
      document.getElementById('cName').focus();
    }
    function closeCustomModal() {
      customModal.classList.remove('open');
      customModal.setAttribute('aria-hidden', 'true');
      document.body.classList.remove('modal-open');
      customForm.reset();
    }
    [openCustom, openCustomM, openCustomTop].forEach(btn => btn?.addEventListener('click', openCustomModal));
    customClose.addEventListener('click', closeCustomModal);
    customCancel.addEventListener('click', closeCustomModal);
    customModal.addEventListener('click', e => { if (e.target === customModal) closeCustomModal(); });

    // Formspree Custom form
    customForm.addEventListener('submit', async (e) => {
      e.preventDefault();
      if (!requireContact(cEmail, cPhone)) { customForm.reportValidity(); return; }
      if (!customForm.reportValidity()) return;

      const size = document.getElementById('cSize').value || 'Project';
      const name = document.getElementById('cName').value.trim();
      const subject = `Custom: ${size} — ${name}`;

      try {
        await postToFormspree(customForm, { _subject: subject });
        window.location.href = 'https://phantomsong.design/thanks';
      } catch {
        alert('Sorry—there was a problem submitting. Please try again.');
      } finally {
        closeCustomModal();
      }
    });

    // Events data
    const EVENTS = [
      {
        title: "Pupapalooza in the Park — Adoption Event",
        city: "Lakeland, TN",
        start: "2025-10-11T11:00:00-05:00",
        end: "2025-10-11T14:00:00-05:00",
        url: "https://www.lakelandtn.gov/CivicAlerts.aspx?AID=1471"
      },
      {
        title: "Millington Fall Festival",
        city: "Millington, TN",
        start: "2025-10-25T10:00:00-05:00",
        end: "2025-10-25T14:00:00-05:00",
        url: "https://www.millingtontn.gov/642/Fall-Halloween-Events?fbclid=IwZnRzaANRUNtleHRuA2FlbQIxMQABHlLaaPgAKbJ-cxMC-fR2PNrRNGkvkSX_E1r3b7yo3YbPnFSzXm8mDwZA6t8l_aem_2ICg7AKqbxgWHPuz7648JA"
      },
      {
        title: "City of Lakeland Harvest Festival 2025",
        city: "Lakeland, TN",
        start: "2025-10-25T15:00:00-05:00",
        end: "2025-10-25T21:00:00-05:00",
        url: "https://www.lakelandtn.gov/CivicAlerts.aspx?AID=1474"
      },
      {
        title: "Rock the Saint Harvest Festival 2025",
        city: "Drummons, TN",
        start: "2025-10-04T10:00:00-05:00",
        end: "2025-10-04T18:00:00-05:00",
        url: "https://www.facebook.com/events/3220-wilkinsville-rd-drummonds-tn/rock-the-saint-fall-festival/611905538642667/"
      }
    ];

    // Helpers
    const fmtMonth = d => d.toLocaleString(undefined, { month: 'long' });
    const fmtWeek = d => d.toLocaleString(undefined, { weekday: 'short' });
    const fmtDay = d => d.getDate();
    const fmtTime = d => d.toLocaleTimeString([], { hour: 'numeric', minute: '2-digit' }).replace(':00', '');
    const timeRange = (s, e) => `${fmtTime(s)}–${fmtTime(e)}`;
    const byStart = (a, b) => new Date(a.start) - new Date(b.start);

    function renderEventLi(ev) {
      const s = new Date(ev.start), e = new Date(ev.end);

      const li = document.createElement('li');
      li.className = 'event';
      li.innerHTML = `
    <div class="pill">
      <div class="wd">${fmtWeek(s)}</div>
      <div class="d">${fmtDay(s)}</div>
      <div class="md">${fmtMonth(s)}</div>
    </div>
    <div class="content">
      <div class="name">${ev.title}</div>
      <div class="meta">${timeRange(s, e)} • ${ev.city}</div>
    </div>
  `;

      if (ev.url) {
        const a = document.createElement('a');
        a.className = 'event-link';
        a.href = ev.url;
        a.target = '_blank';
        a.rel = 'noopener';
        a.setAttribute('aria-label',
          `${ev.title} — ${s.toDateString()} ${fmtTime(s)}–${fmtTime(e)} in ${ev.city}`);
        li.appendChild(a);
      }

      return li;
    }

    function renderLists() {
      const now = new Date();
      const upcoming = [], past = [];
      EVENTS.sort(byStart).forEach(ev => (now < new Date(ev.end) ? upcoming : past).push(ev));

      const upUL = document.getElementById('upcomingList');
      const upEmpty = document.getElementById('upcomingEmpty');
      const pastUL = document.getElementById('pastList');

      upUL.innerHTML = '';
      pastUL.innerHTML = '';

      if (upcoming.length === 0) {
        upEmpty.hidden = false;
        upUL.style.display = 'none';
      } else {
        upEmpty.hidden = true;
        upUL.style.display = '';
        upcoming.forEach(ev => upUL.appendChild(renderEventLi(ev)));
      }
      past.forEach(ev => pastUL.appendChild(renderEventLi(ev)));

      [upUL, pastUL].forEach(ul => updateScrollHint(ul));
    }

    function updateScrollHint(ul) {
      const overflowing = ul.scrollHeight > ul.clientHeight + 1;
      ul.classList.toggle('is-overflowing', overflowing);
      ul.addEventListener('wheel', () => { }, { passive: true });
    }
    window.addEventListener('resize', () => {
      document.querySelectorAll('.event-list').forEach(updateScrollHint);
    });

    renderLists();
  </script>
</body>

</html>