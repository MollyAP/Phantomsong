<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Phantomsong — Creative Studio</title>

  <link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,300..900;1,300..900&display=swap"
    rel="stylesheet">
  <link href="styles.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
    referrerpolicy="no-referrer">
</head>

<body>
  <!-- ===== Header ===== -->
  <header class="header">
    <div class="container nav">
      <a href="/" class="brand" aria-label="Back to home">
        <span class="brand-logo" aria-hidden="true">
          <svg viewBox="0 0 46 46" width="46" height="46" aria-hidden="true">
            <defs>
              <symbol id="ps-logo-shape" viewBox="0 0 1006.1 1376.9">
                <g transform="matrix(.1 0 0 -.1 -61.743 1488.5)" fill="#000">
                  <path
                    d="m1193.6 7390.4c-66.011-1.0896-170.82-30.749-222.13-57.051-101.52-51.718-210.25-158.22-264.51-256.52l-28.516-51.133a315.55 315.55 0 0 1-39.98-153.34l-3.0078-2590a315.55 315.55 0 0 1 0-0.1563c-0.99977-1464.7-4.049-2123.4 5.3906-2447.9 4.7198-162.24-0.70678-232.49 42.734-352.44 21.721-59.978 80.166-136.66 114.82-165.94 11.202-9.4627 11.588-9.7345 14.512-12.168 14.23-17.022 53.71-63.325 131.29-103.55 90.082-46.714 166.55-53.546 252.38-59.59 128.76-9.0658 312.67-9.692 648.44-9.4336 111.92 0.086 240.72 0.2735 389.96 0.2735 149.35 0 278.73-0.096 391.17-0.098 393.56-0.01 567.54-2.1559 709.16 15.684 70.812 8.9197 154.08 29.411 225.61 76.465 70.785 46.568 94.06 81.99 101.93 90.117-0.4631-0.4606-0.942-0.9097-1.4063-1.3672l1.5625 1.543c111.45 110.98 188.88 311.36 178.85 466.5-14.262 222.33-161.61 424.75-358.44 516.6a315.55 315.55 0 0 1-2.4023 1.1133c-13.456 6.1431-80.438 30.694-127.21 37.441-46.769 6.7476-86.086 8.0947-149.41 9.707-126.66 3.2246-347.83 3.8516-791.33 5.3516a315.55 315.55 0 0 0-0.019 0l-578.54 1.9336v2084.5c0 1189 0.01 1788.3-2.5195 2100.9-1.2633 156.34-2.8431 239.38-6.4844 299.8-3.6369 60.354-23.722 143.45-31.289 163.57-79.879 212.05-318.54 378.87-542.27 387.91-18.373 0.8604-36.854 1.5463-58.359 1.1914z" />
                  <path
                    d="m1283.1 13084c-53.914 1.059-109.65-2.677-177.21-24.786a315.55 315.55 0 0 1-0.7032-0.214c-174.2-57.468-328.56-191.93-396.74-369.61a315.55 315.55 0 0 1-0.0586-0.176c-10.966-28.634-26.779-97.724-30.547-147.73-3.768-50.009-5.2845-110.15-6.5625-215.55-2.556-210.79-2.7734-598-2.7734-1348.6v-1550a315.55 315.55 0 0 1 30.254-134.82l26.016-55c100.03-211.83 311.05-356.76 546.23-360.18 65.38-0.948 132.02 9.1363 196 30.43 197.62 64.327 289.32 155.8 370.84 337.25v0.019l23.613 52.148a315.55 315.55 0 0 1 28.105 130.16v1550c0 750.57-0.2174 1137.8-2.7734 1348.6-1.278 105.4-2.7945 165.54-6.5625 215.55-3.7612 49.92-19.524 118.83-30.488 147.56-61.331 160.8-149.56 255.3-300.72 331.07-93.664 47.425-176.44 62.127-265.92 63.887z" />
                  <path
                    d="m5597.6 12803c-70.638-2.219-140.15-7.24-207.85-15.547-546.93-66.413-1059.4-311.28-1449.4-696.58-210.66-207.39-365.43-423.58-493.95-687.21-111.3-227.11-178.22-437.48-228.52-704.96-33.091-175.29-23.47-357.94-25.469-3738.1-1.9998-2007.8-4.8769-2915.3 3.1836-3345.7 4.0302-215.2 0.818-295.62 31.406-412.6 15.294-58.489 71.933-154.81 119.12-195.27 14.171-12.152 20.173-17.471 21.973-19.082 107.82-103.76 279.11-176.58 423.4-178.14a315.55 315.55 0 0 1 3.4375-0.02c222.19 0 457.62 149.84 551.7 350.64l0.02 0.039 23.75 50.469a315.55 315.55 0 0 1 30.058 134.38v4829.9c62.278-39.235 127.19-75.982 196.33-111.05 218.52-111.52 450.29-186.13 708.46-231.56a315.55 315.55 0 0 1 1.2109-0.2148c246.22-42.344 573.02-40.247 819.75 4.4726a315.55 315.55 0 0 1 0.8008 0.1563c542.41 99.74 1013.5 351.92 1390.9 746.15a315.55 315.55 0 0 1 0.1172 0.098c373.08 390.14 603.26 879.23 670.08 1418.3a315.55 315.55 0 0 1 0.1367 1.094c21.617 179.58 21.24 425.69 0.078 604.75a315.55 315.55 0 0 1-0.1367 1.074c-88.966 731.12-492.06 1378.3-1110.7 1785.5a315.55 315.55 0 0 1-0.1953 0.137c-247.76 162.78-557.09 296.35-839.84 355.18h-0.059c-205.1 42.76-427.48 60.534-639.73 53.867zm89.531-1209.4c84.54 0.983 172.88-4.512 209.69-10.195a315.55 315.55 0 0 1 0.2343-0.04c535.89-82.32 951.46-476.41 1070.4-1029.5a315.55 315.55 0 0 1 0.2929-1.387c10.822-49.22 13.316-419.23 4.1992-463.24a315.55 315.55 0 0 1-0.4101-2.031c-110.84-553.36-520.2-956.06-1046.7-1046a315.55 315.55 0 0 1-1.4648-0.2539c-45.307-7.9546-163.8-16.427-261.48-15.391-58.614 0.622-113.6 4.494-139 8.0664a315.55 315.55 0 0 1-0.332 0.059c-476.43 66.478-907.23 430-1055.1 892.52l-0.019 0.039c-55.437 173.82-52.012 156.19-52.012 383.94 0 229.66 0.5631 237.81 64.082 418.24a315.55 315.55 0 0 1 0.5859 1.68c147.83 427.68 550 769.97 996.35 848.32a315.55 315.55 0 0 1 0.2929 0.04c37.464 6.612 125.78 14.095 210.33 15.078z" />
                  <path
                    d="m5869 14869c-52.614 0.132-101.19-0.421-143.14-1.933-20.979-0.756-40.06-1.684-60.02-3.36-19.96-1.675-28.466 2.388-88.789-15.546a315.55 315.55 0 0 1-2.5586-0.782c-272.25-83.463-464.09-339.04-440-632.48a315.55 315.55 0 0 1 0.039-0.391c18.303-219.64 138.12-391.48 329.28-491.41a315.55 315.55 0 0 1 5.0586-2.578c41.752-20.876 124.96-44.724 187.03-51.465 61.967-6.73 132.93-9.995 258.65-15.527h0.059c146.75-6.716 340.44-21.02 392.11-27.129 844.17-101.29 1560.4-447.1 2142.1-1028.7 527.27-528.24 825.65-1105.3 940.78-1813.6a315.55 315.55 0 0 1 0.1563-1.016c33.033-199.14 41.738-311.11 41.738-515.35 0-595.95-142.44-1141-426.89-1642.3a315.55 315.55 0 0 1-0.059-0.098c-435.31-767.66-1260.6-1393.2-2124.2-1609.6a315.55 315.55 0 0 1-0.059 0c-324.2-81.288-470.74-98.56-864.04-99.531a315.55 315.55 0 0 1-0.996 0c-178.07-1.0032-268.92 2.8895-380.98-17.461s-240.12-111.29-283.91-154.51a315.55 315.55 0 0 1-2.3632-2.3633c-234.45-236.4-219.61-652.05 27.07-873.79 48.863-43.934 180.57-130.1 297.91-148.85 88.061-14.073 169.77-15.507 293.93-15.352 41.385 0.052 87.492 0.2735 140.12 0.2735 391.62 0 509.01 9.454 812.91 66.367 759.29 141.51 1491.2 491.07 2112.9 1004.8 174.16 143.53 431.55 400.26 575.14 571.84 591.06 709.27 932.14 1515.4 1034.2 2437.3 27.389 254.71 25.16 733.22-5.468 986.6-56.92 453.25-158.92 847.54-320.78 1227.4-431.78 1009.3-1248.8 1856-2264.8 2356-585.51 288.48-1206.3 455.94-1862.4 501.66-95.076 6.262-213.48 9.17-318.71 9.433z" />
                </g>
              </symbol>
              <mask id="logo-cutout" maskUnits="userSpaceOnUse" maskContentUnits="userSpaceOnUse">
                <rect x="0" y="0" width="46" height="46" fill="#fff" />
                <svg x="5" y="5" width="36" height="36" viewBox="0 0 1006.1 1376.9" preserveAspectRatio="xMidYMid meet">
                  <use href="#ps-logo-shape" fill="#000" />
                </svg>
              </mask>
            </defs>

            <rect x="0" y="0" width="46" height="46" rx="10" ry="10" fill="var(--light)" mask="url(#logo-cutout)" />
            <rect x="0.5" y="0.5" width="45" height="45" rx="9.5" ry="9.5" fill="none" stroke="var(--border)" />
          </svg>
        </span>
        Phantomsong
      </a>

      <nav class="nav-links" aria-label="Primary">
        <a href="#services">Services</a>
        <a href="#work">Portfolio</a>
        <a href="#about">About</a>
        <a href="#contact">Contact</a>
      </nav>

      <div class="nav-cta">
        <a class="btn btn-ghost" href="/market/">Market</a>
        <a class="btn btn-primary" href="#contact">Book Free</a>
      </div>

      <button class="menu-btn" id="menuBtn" aria-label="Toggle menu" aria-expanded="false">☰</button>
    </div>
    <div class="container mobile-menu" id="mobileMenu" aria-hidden="true">
      <a href="#services">Services</a>
      <a href="#work">Portfolio</a>
      <a href="#about">About</a>
      <a href="#contact">Contact</a>
      <div class="menu-actions">
        <a class="btn btn-ghost" href="/market/">Market</a>
        <a class="btn btn-primary" href="#contact">Book</a>
      </div>
    </div>
  </header>

  <!-- ===== Hero ===== -->
  <section class="section hero" id="hero">
    <div class="container hero-wrap">
      <div class="copy">
        <div class="section-header">
          <span class="kicker tag">Creative Studio</span>
        </div>
        <h1>We build brands &amp; websites that tell your story clearly. We don’t just create. We connect.</h1>
        <p>From visual identity to fully-responsive websites and product visuals, we help small teams look
          enterprise-level without the enterprise price tag.</p>
        <div class="actions">
          <a href="#contact" class="btn btn-primary">Free 15-minute consultation ↗</a>
          <a href="#work" class="btn btn-ghost">See recent projects</a>
        </div>
      </div>
      <div class="media" aria-hidden="true">
        <img src="./SRC/Code.png" alt="" loading="lazy" decoding="async">
      </div>
    </div>
  </section>

  <!-- ===== Experience ===== -->
  <section class="section" id="experience">
    <div class="container">
      <div class="section-header">
        <div>
          <span class="tag">Experience</span>
          <h2>Companies we've worked for.</h2>
          <p>Our founders have previously been employed by or done work for:</p>
        </div>
      </div>
    </div>
  </section>

  <!-- ===== Trusted by ===== -->
  <section class="section trusted-by" aria-label="Trusted by">
    <div class="container trust">
      <img src="https://i.imgur.com/TEyAHP0.png" alt="CodeCrew" loading="lazy" decoding="async">
      <img src="https://i.imgur.com/edpmW0L.png" alt="MoSH" loading="lazy" decoding="async">
      <img src="https://i.imgur.com/D2rcWqm.png" alt="Persevere" loading="lazy" decoding="async">
      <img src="https://i.imgur.com/VlNg0QW.png" alt="Unlock Potential" loading="lazy" decoding="async">
    </div>
  </section>

  <!-- ===== Services ===== -->
  <section class="section services" id="services">
    <div class="container">
      <div class="section-header">
        <div>
          <span class="tag">What we do</span>
          <h2>Design that moves people... and metrics.</h2>
          <p>A compact, high-impact set of services for founders and small teams.</p>
        </div>
        <a href="#contact" class="btn btn-ghost">Get a quote</a>
      </div>

      <div class="grid">
        <article class="card">
          <span class="tag">Web</span>
          <h3>Responsive Websites</h3>
          <p>Fast, accessible, SEO-ready sites with an easy CMS we configure for you—no coding required.</p>
        </article>
        <article class="card">
          <span class="tag">Brand</span>
          <h3>Identity &amp; Logo</h3>
          <p>Distinctive logos, color systems, and brand kits for every touchpoint.</p>
        </article>
        <article class="card">
          <span class="tag">Visual</span>
          <h3>Product &amp; Promo</h3>
          <p>Mockups, packaging, and social visuals that look crisp on any screen.</p>
        </article>
      </div>
    </div>
  </section>

  <!-- ===== Portfolio ===== -->
  <section class="section work" id="work" aria-label="Featured work">
    <div id="portfolio">
      <!-- Web Design grid -->
      <div class="wrap">
        <div class="section-header">
          <span class="tag">Portfolio</span>
        </div>

        <h1>Web Design</h1>
        <p class="lead">Click any square to open an interactive preview!</p>
        <div id="grid" class="grid" aria-live="polite"></div>
      </div>

      <!-- Website Preview Modal -->
      <div id="preview" class="preview" role="dialog" aria-modal="true" aria-hidden="true">
        <div class="panel" role="document">
          <div class="toolbar">
            <button id="openTab" title="Open in new tab">↗ Open</button>
            <button id="closePreview" class="close-btn" title="Close">✕</button>
          </div>
          <div class="frame-wrap">
            <iframe id="demoFrame" class="demo"
              sandbox="allow-scripts allow-forms allow-pointer-lock allow-same-origin allow-popups"></iframe>
          </div>
        </div>
      </div>

      <!-- Logo Design carousel -->
      <div class="wrap">
        <h1>Logo Design</h1>
        <p class="lead">Click any logo to see its design process!</p>

        <div class="carousel-wrap">
          <button class="caro-arrow caro-prev" id="caroPrev" aria-label="Scroll left">‹</button>
          <div id="logo-carousel" class="carousel" aria-label="Logo carousel"></div>
          <button class="caro-arrow caro-next" id="caroNext" aria-label="Scroll right">›</button>
        </div>

        <!-- Logo Preview Modal -->
        <div id="logo-preview" class="logo-preview" aria-modal="true" aria-hidden="true">
          <div class="logo-panel" role="document">
            <div class="logo-left">
              <img id="logo-main" src="" alt="Logo preview">
            </div>
            <div class="logo-right">
              <h1 id="logo-title"></h1>
              <p id="logo-client"></p>
              <hr>
              <div id="logo-thumbs" class="logo-thumbs"></div>
            </div>
          </div>
          <button id="close-logo-preview" class="close-btn" aria-label="Close logo preview">✕</button>
        </div>
      </div>
    </div>
  </section>

  <!-- ===== Market Promo ===== -->
  <section class="section market-promo" id="market-promo">
    <div class="container">
      <a href="/market/" class="market-promo__banner" aria-label="Go to our market page">
        <span class="market-promo__text">
          See us at a market? Click here to be transferred to our market page!
        </span>
      </a>
    </div>
  </section>

  <!-- ===== Testimonials ===== -->
  <section class="section testimonials" id="testimonials" aria-label="Testimonials">
    <div class="container">
      <div class="section-header">
        <div>
          <span class="tag">Nice things people say</span>
        </div>
      </div>

      <div class="grid">
        <blockquote class="quote">
          <p>“I sell handmade trinkets at kids’ vendor fairs. Phantomsong made me a real website, and now parents and
            organizers take me seriously. I look more professional than all the other kids and I’m selling out much
            faster!”</p>
          <div class="meta">
            <span class="avatar">
              <img src="https://i.imgur.com/hHMhJdt.png" alt="Portrait of Jordan R." loading="lazy" decoding="async">
            </span>
            <span>Samantha P. — Voidbox</span>
          </div>
        </blockquote>

        <blockquote class="quote">
          <p>“I used to be stuck with a generic Redbubble shop. Now I have my own site built around me: my colors, my
            personality, my style. When customers land on it, they know they’re in my shop, not a dime-a-dozen online
            retailer.”</p>
          <div class="meta">
            <span class="avatar">
              <img src="https://i.imgur.com/Yng6d3Z.png" alt="Portrait of Priya M." loading="lazy" decoding="async">
            </span>
            <span>Nicole K. — NK. Art</span>
          </div>
        </blockquote>

        <blockquote class="quote">
          <p>“Phantomsong turned my CV into a clean resume site, my experience and skills plus a gallery in one link. It
            prints perfectly and looks like me.”</p>
          <div class="meta">
            <span class="avatar">
              <img src="https://picsum.photos/80?random=33" alt="Portrait of Leo V." loading="lazy" decoding="async">
            </span>
            <span>Amaya C. — Calder's Kitchen</span>
          </div>
        </blockquote>
      </div>
    </div>
  </section>

  <!-- ===== CTA ===== -->
  <section class="section cta" id="contact">
    <div class="container wrap">
      <div>
        <h2>Let’s build something people love.</h2>
        <p>Tell us about your idea and we’ll propose a simple plan, timeline, and price.</p>
      </div>
      <div class="actions">
        <button type="button" class="btn btn-primary" id="openConsult" aria-haspopup="dialog"
          aria-controls="consultModal">
          Free 15 minute consultation
        </button>

        <a class="btn btn-ghost" href="mailto:contact@phantomsong.net">
          contact@phantomsong.net
        </a>
      </div>
    </div>
  </section>


  <!-- ===== Consultation Modal ===== -->
  <div class="consult-modal" id="consultModal" role="dialog" aria-modal="true" aria-hidden="true">
    <div class="consult-card" role="document">
      <div class="consult-head">
        <h3 class="consult-title">Request a free 15-minute consultation</h3>
        <button class="consult-close" id="consultClose" aria-label="Close">✕</button>
      </div>
      <form id="consultForm" class="consult-body" action="https://formspree.io/f/xjkaedvg" method="POST" novalidate>
        <input type="hidden" name="_subject" value="Consultation request">
        <input type="hidden" name="_redirect" value="https://phantomsong.design/thanks">
        <input type="text" name="_gotcha" tabindex="-1" autocomplete="off" style="display:none">

        <div class="consult-grid cols-2">
          <div class="form-field">
            <label for="name">Your name *</label>
            <input id="name" name="name" type="text" autocomplete="name" required>
          </div>
          <div class="form-field">
            <label for="email">Email address *</label>
            <input id="email" name="email" type="email" inputmode="email" autocomplete="email" required>
          </div>
        </div>

        <div class="consult-grid">
          <div class="form-field">
            <label for="company">Company (optional)</label>
            <input id="company" name="company" type="text" autocomplete="organization">
          </div>
        </div>

        <div class="consult-grid cols-2">
          <div class="form-field">
            <label for="service">Service</label>
            <select id="service" name="service">
              <option value="Website design">Website design</option>
              <option value="Brand identity">Brand identity</option>
              <option value="Graphic design">Graphic design</option>
              <option value="Web administrative services">Web administrative services</option>
              <option value="Editorial Design">Editorial Design</option>
              <option value="Other">Other</option>
            </select>
            <small>Need multiple services? List them in the box below.</small>
          </div>
          <div class="form-field" id="otherServiceField">
            <label for="otherService">Other service</label>
            <input id="otherService" name="otherService" type="text" placeholder="Describe the service">
          </div>
        </div>

        <div class="consult-grid">
          <div class="form-field">
            <label for="brief">Briefly describe what you’re looking for</label>
            <textarea id="brief" name="brief" placeholder="A sentence or two is perfect."></textarea>
          </div>
        </div>

        <div class="consult-grid">
          <label class="check">
            <input id="confirm" name="confirm" type="checkbox" required>
            <span>
              I understand the free consultation is <strong>15 minutes</strong>. If I want more time, I can book a
              follow-up for <strong>$60</strong> with an additional <strong>$22/hr</strong>.
            </span>
          </label>
        </div>

        <div class="consult-actions">
          <button type="button" class="btn-cancel" id="consultCancel">Cancel</button>
          <button type="submit" class="btn-submit" id="consultSubmit">Request</button>
        </div>
      </form>
    </div>
  </div>

  <!-- ===== Footer ===== -->
  <footer class="footer" id="about" role="contentinfo">
    <div class="container grid">
      <div class="footer-col footer-brand">
        <div class="brand">
          <span class="brand-logo" aria-hidden="true">
            <svg viewBox="0 0 46 46" width="46" height="46" aria-hidden="true">

              <rect x="0" y="0" width="46" height="46" rx="10" ry="10" fill="var(--light)" mask="url(#logo-cutout)" />
              <rect x="0.5" y="0.5" width="45" height="45" rx="9.5" ry="9.5" fill="none" stroke="var(--border)" />
            </svg>
          </span>
          Phantomsong
        </div>
        <div>Millington, Tennessee</div>
      </div>

      <!-- Navigate -->
      <div class="footer-col">
        <div class="section-header">
          <strong>Navigate</strong>
        </div>
        <nav aria-label="Footer navigation">
          <a href="#work">Portfolio</a>
          <a href="#services">Services</a>
          <a href="#testimonials">Testimonials</a>
          <a href="#about">About</a>
        </nav>
      </div>

      <!-- Contact -->
      <div class="footer-col">
        <div class="section-header">
          <strong>Contact</strong>
        </div>
        <a href="mailto:contact@phantomsong.net">contact@phantomsong.net</a>
      </div>
    </div>
  </footer>


  <script>
    /* Mobile menu toggle */
    const menuBtn = document.getElementById('menuBtn');
    const mobileMenu = document.getElementById('mobileMenu');
    menuBtn?.addEventListener('click', () => {
      const open = mobileMenu.style.display === 'flex';
      mobileMenu.style.display = open ? 'none' : 'flex';
      mobileMenu.setAttribute('aria-hidden', open ? 'true' : 'false');
      menuBtn.setAttribute('aria-expanded', open ? 'false' : 'true');
    });

    /* Smooth scroll for internal links */
    document.querySelectorAll('a[href^="#"]').forEach(a => {
      a.addEventListener('click', e => {
        const id = a.getAttribute('href');
        if (id.length > 1) {
          e.preventDefault();
          document.querySelector(id)?.scrollIntoView({ behavior: 'smooth', block: 'start' });
          mobileMenu.style.display = 'none';
          mobileMenu.setAttribute('aria-hidden', 'true');
          menuBtn.setAttribute('aria-expanded', 'false');
        }
      });
    });

    /* === Portfolio: Web grid === */
    (() => {
      const sites = [
        { title: "Voidbox", url: "https://mollyap.github.io/voidbox/", thumb: "./SRC/Voidbox.png" },
        { title: "NKArt", url: "https://mollyap.github.io/NKArt/", thumb: "./SRC/NKArt.png" },
        { title: "CalderKitchen", url: "https://mollyap.github.io/calderkitchen/", thumb: "./SRC/CalderKitchen.png" },
      ];

      const grid = document.getElementById('grid');
      const preview = document.getElementById('preview');
      const demoFrame = document.getElementById('demoFrame');
      const openTab = document.getElementById('openTab');
      const closePreview = document.getElementById('closePreview');

      function escapeHtml(s) {
        return (s || '').replace(/[&<>\"']/g, c => ({ '&': '&amp;', '<': '&lt;', '>': '&gt;', '"': '&quot;', "'": '&#39;' }[c]));
      }

      sites.forEach((s) => {
        const card = document.createElement('button');
        card.className = 'card';
        card.setAttribute('aria-haspopup', 'dialog');
        card.title = s.title + '\n' + s.url;

        const thumb = document.createElement('div');
        thumb.className = 'thumb';
        thumb.style.backgroundImage = `url(${s.thumb})`;

        const overlay = document.createElement('div');
        overlay.className = 'overlay';
        overlay.innerHTML = `<div><div class='title'>${escapeHtml(s.title)}</div><div class='url'>${escapeHtml(s.url)}</div></div>`;

        card.appendChild(thumb);
        card.appendChild(overlay);
        card.addEventListener('click', () => openPreview(s));
        grid.appendChild(card);
      });

      function openPreview(site) {
        preview.classList.add('open');
        preview.setAttribute('aria-hidden', 'false');
        demoFrame.src = site.url;
        preview.dataset.currentUrl = site.url;
        openTab.dataset.url = site.url;
      }

      function closePortfolioPreview() {
        preview.classList.remove('open');
        preview.setAttribute('aria-hidden', 'true');
        demoFrame.src = 'about:blank';
      }

      closePreview.addEventListener('click', closePortfolioPreview);
      preview.addEventListener('click', (ev) => { if (ev.target === preview) closePortfolioPreview(); });
      openTab.addEventListener('click', () => { const u = preview.dataset.currentUrl; window.open(u, '_blank'); });

      // close with ESC also close logo modal if open
      window.addEventListener('keydown', (e) => { if (e.key === 'Escape') { closePortfolioPreview(); closeLogo(); } });
    })();

    /* === Portfolio: Logo carousel === */
    (() => {
      const logos = [
        { title: "Byte Sized Courses", client: "For CodeCrew", icon: "https://i.imgur.com/wm9eTdR.png", images: ["https://i.imgur.com/GCkSiUk.png"] },
        { title: "Beta Studio", client: "For Beta Studio", icon: "https://imgur.com/Yng6d3Z.png", images: ["logos/beta_1.png", "logos/beta_2.png", "logos/beta_3.png"] }
      ];

      const carousel = document.getElementById("logo-carousel");
      const logoPreview = document.getElementById("logo-preview");
      const logoMain = document.getElementById("logo-main");
      const logoTitle = document.getElementById("logo-title");
      const logoClient = document.getElementById("logo-client");
      const logoThumbs = document.getElementById("logo-thumbs");
      const closeLogoPreview = document.getElementById("close-logo-preview");

      logos.forEach((logo, i) => {
        const btn = document.createElement("button");
        const img = document.createElement("img");
        img.src = logo.icon; img.alt = logo.title;
        btn.appendChild(img);
        btn.addEventListener("click", () => openLogo(i));
        carousel.appendChild(btn);
      });

      function openLogo(index) {
        const logo = logos[index];
        const stack = [logo.icon, ...(logo.images || [])].filter((src, i, arr) => arr.indexOf(src) === i);

        logoMain.src = stack[0];
        logoTitle.textContent = logo.title;
        logoClient.textContent = logo.client;

        logoThumbs.innerHTML = "";
        stack.forEach(src => {
          const thumb = document.createElement("img");
          thumb.src = src;
          thumb.alt = logo.title + " option";
          thumb.addEventListener("click", () => { logoMain.src = src; });
          logoThumbs.appendChild(thumb);
        });

        logoPreview.classList.add("open");
        logoPreview.setAttribute('aria-hidden', 'false');
      }

      function closeLogo() {
        logoPreview.classList.remove("open");
        logoPreview.setAttribute('aria-hidden', 'true');
      }
      window.closeLogo = closeLogo;

      closeLogoPreview.addEventListener("click", closeLogo);
      logoPreview.addEventListener("click", ev => { if (ev.target === logoPreview) closeLogo(); });

      // Arrow controls
      const prevBtn = document.getElementById('caroPrev');
      const nextBtn = document.getElementById('caroNext');

      function updateArrowState() {
        const overflow = carousel.scrollWidth > carousel.clientWidth + 4;
        prevBtn.style.display = nextBtn.style.display = overflow ? 'grid' : 'none';

        const maxScrollLeft = carousel.scrollWidth - carousel.clientWidth - 1;
        prevBtn.toggleAttribute('disabled', carousel.scrollLeft <= 0);
        nextBtn.toggleAttribute('disabled', carousel.scrollLeft >= maxScrollLeft);
      }
      function scrollByAmount(dir) {
        const amount = Math.max(1, Math.floor(carousel.clientWidth * 0.9));
        carousel.scrollBy({ left: dir * amount, behavior: 'smooth' });
      }
      prevBtn.addEventListener('click', () => scrollByAmount(-1));
      nextBtn.addEventListener('click', () => scrollByAmount(1));
      carousel.addEventListener('scroll', updateArrowState);
      window.addEventListener('resize', updateArrowState);
      window.addEventListener('load', updateArrowState);
      setTimeout(updateArrowState, 0);
    })();

    /* === Form helpers (Formspree) === */
    async function postToFormspree(form, extra = {}) {
      const fd = new FormData(form);
      for (const [k, v] of Object.entries(extra)) fd.set(k, v);
      const res = await fetch(form.action, {
        method: 'POST',
        body: fd,
        headers: { Accept: 'application/json' }
      });
      if (!res.ok) throw new Error('Form submit failed');
    }

    /* === Consultation Modal === */
    (() => {
      const modal = document.getElementById('consultModal');
      const openBtn = document.getElementById('openConsult');
      const closeBtn = document.getElementById('consultClose');
      const cancelBtn = document.getElementById('consultCancel');
      const form = document.getElementById('consultForm');
      const service = document.getElementById('service');
      const otherFieldWrap = document.getElementById('otherServiceField');
      const otherInput = document.getElementById('otherService');
      let lastFocused = null;

      function openModal() {
        lastFocused = document.activeElement;
        document.body.classList.add('modal-open');
        modal.classList.add('open');
        modal.setAttribute('aria-hidden', 'false');
        document.getElementById('name').focus();
      }

      function closeModal() {
        modal.classList.remove('open');
        modal.setAttribute('aria-hidden', 'true');
        document.body.classList.remove('modal-open');
        if (lastFocused) lastFocused.focus();
      }


      openBtn.addEventListener('click', openModal);
      closeBtn.addEventListener('click', closeModal);
      cancelBtn.addEventListener('click', closeModal);
      modal.addEventListener('click', (e) => { if (e.target === modal) closeModal(); });
      window.addEventListener('keydown', (e) => { if (e.key === 'Escape') closeModal(); });

      service.addEventListener('change', () => {
        const isOther = service.value === 'Other';
        otherFieldWrap.style.display = isOther ? 'block' : 'none';
        if (!isOther) { otherInput.value = ''; }
      });

      form.addEventListener('submit', async (e) => {
        e.preventDefault();
        if (!form.reportValidity()) return;

        if (service.value === 'Other' && !otherInput.value.trim()) {
          otherInput.focus();
          otherInput.setCustomValidity('Please specify the service.');
          otherInput.reportValidity();
          otherInput.addEventListener('input', () => otherInput.setCustomValidity(''), { once: true });
          return;
        }

        const subject = `Consultation: ${document.getElementById('name').value.trim() || 'Request'}`;
        try {
          await postToFormspree(form, { _subject: subject });
          window.location.href = 'https://phantomsong.design/thanks';
          form.reset();
          closeModal();
        } catch (err) {
          alert('Sorry—there was a problem submitting. Please try again.');
        }
      });
    })();
  </script>
</body>

</html>